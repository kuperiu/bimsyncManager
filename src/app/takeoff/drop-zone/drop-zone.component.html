<div class="drop-zone">
  <div class="zone">
    <mat-chip-list class="mat-chip-list-stacked" cdkDropList id="{{zoneId}}"
    cdkDropListConnectedTo="propertyTree" (cdkDropListDropped)="drop($event)">
      <mat-chip *ngFor="let property of (propertiesList$ | async)" cdkDrag [cdkDragData]="property" style="height: 100%" class="mat-chip-small">
        <div class="chip-flex">
          <div>{{ property.GetDisplayedName() }}</div>
          <div>
            <button mat-icon-button [matMenuTriggerFor]="appMenu" class="mat-small">
              <mat-icon>expand_more</mat-icon>
            </button>
            <button mat-icon-button class="mat-small" (click)="RemoveProperty(property)">
              <mat-icon>close</mat-icon>
            </button>
          </div>
        </div>
        
        <mat-menu #appMenu="matMenu" #rootMenu="matMenu">
          <button mat-menu-item class="chip-menu-button" (click)="RemoveProperty(property)">Remove Field</button>
          <button mat-menu-item class="chip-menu-button" [matMenuTriggerFor]="subMenu">Move</button>
          <mat-divider></mat-divider>
          <button 
          mat-menu-item class="chip-menu-button" 
          *ngFor="let groupingMode of property.availableGroupingModes"
          (click)="property.groupingMode = groupingMode">
            {{groupingMode.modeName}}
          </button>
        </mat-menu>

        <mat-menu #subMenu="matMenu">
          <button mat-menu-item disabled=true class="chip-menu-button">Up</button>
          <button mat-menu-item class="chip-menu-button">Down</button>
          <button mat-menu-item class="chip-menu-button">To top</button>
          <button mat-menu-item class="chip-menu-button">To bottom</button>
        </mat-menu>

      </mat-chip>
      <div class="mat-body no-property" *ngIf="(propertiesList$ | async)?.length == 0">
        Add properties here...
      </div>
    </mat-chip-list>
  </div>
</div>